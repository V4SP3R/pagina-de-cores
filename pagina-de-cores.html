<!doctype html>
<html lang="pt-BR" data-ui="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#782ce7" />
  <title>COLORFY ‚Äî Resultado Premium (V3.1)</title>
  <meta name="description" content="P√°gina de resultados premium para an√°lise de paleta por esta√ß√£o (Colorimetria)." />
  <meta property="og:title" content="COLORFY ‚Äî Resultado Premium" />
  <meta property="og:description" content="Resultado premium por esta√ß√£o com neutros, destaques e combina√ß√µes prontas." />
  <meta property="og:type" content="website" />


  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      /* ===== Base (igual ao index) ===== */
      --bg: #ece9e1;
      --card: #FFFFFF;
      --text: #0b1020;
      --text-secondary: #46546b;
      --muted: #5a687c;

      --primary-purple: #782ce7;
      --primary-pink: #0ab6ce;
      --accent-lilac: #F3E8FF;
      --gradient-main: linear-gradient(135deg, #782ce7 0%, #0ab6ce 100%);

      --premium-shadow: 0 20px 40px rgba(168, 85, 247, 0.12);
      --glow-btn: 0 10px 25px rgba(217, 70, 239, 0.25);
      --shadow1: rgba(20, 30, 50, .12);
      --shadow2: rgba(255, 255, 255, .90);

      --radius: 28px;
      --radiusSm: 18px;
      --ease: cubic-bezier(0.23, 1, 0.32, 1);
      --t: 420ms;
      --font: "Plus Jakarta Sans", "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      /* ===== Tokens din√¢micos por esta√ß√£o (setados via JS) ===== */
      --seasonA: #782ce7;
      --seasonB: #0ab6ce;
      --seasonC: #4f46e5;
      --seasonN1: #FFFFFF;
      --seasonN2: #F3F4F6;
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: var(--font);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;

      background:
        radial-gradient(1200px 700px at 18% 8%, color-mix(in srgb, var(--seasonA) 16%, transparent) 0%, transparent 58%),
        radial-gradient(900px 600px at 86% 18%, color-mix(in srgb, var(--seasonB) 14%, transparent) 0%, transparent 62%),
        radial-gradient(900px 600px at 55% 100%, color-mix(in srgb, var(--seasonC) 10%, transparent) 0%, transparent 60%),
        radial-gradient(1200px 800px at 50% 45%, rgba(123, 77, 255, .10), transparent 70%),
        var(--bg);
    }

    /* ---------- Neumorphism / Glass (DNA do index) ---------- */
    .neu-card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 20px 20px 40px var(--shadow1), -20px -20px 40px var(--shadow2);
      border: 1px solid rgba(255, 255, 255, .15);
    }
    .neu-card.glass {
      background: rgba(255, 255, 255, .72);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border: 1px solid rgba(255, 255, 255, .58);
      box-shadow: 10px 10px 20px var(--shadow1), -10px -10px 20px var(--shadow2);
    }
    .premium-card {
      background: #FFFFFF;
      border-radius: var(--radius);
      border: 1px solid rgba(255, 255, 255, 0.55);
      box-shadow: var(--premium-shadow);
      transition: transform .45s var(--ease), box-shadow .45s var(--ease), border-color .45s var(--ease);
    }
    .premium-card:hover {
      transform: translateY(-3px);
      border-color: color-mix(in srgb, var(--seasonA) 22%, #fff);
      box-shadow: 0 40px 80px rgba(138, 43, 226, 0.14);
    }

    .topbar {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      background: rgba(236,233,225,.70);
      border-bottom: 1px solid rgba(255,255,255,.6);
    }
    .brand {
      display:flex; align-items:center; gap:.75rem;
      font-weight: 900;
      letter-spacing: -0.03em;
    }
    .brandMark {
      width: 38px; height: 38px;
      border-radius: 14px;
      background: var(--gradient-main);
      box-shadow: 0 14px 30px rgba(120,44,231,.20);
      position: relative;
      overflow:hidden;
    }
    .brandMark:after {
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(14px 14px at 30% 30%, rgba(255,255,255,.9), transparent 60%);
      opacity:.75;
      transform: rotate(12deg);
    }

    .pill {
      display:inline-flex; align-items:center; gap:.45rem;
      padding: .38rem .7rem;
      border-radius: 999px;
      border: 1px solid rgba(20,30,50,.10);
      background: rgba(255,255,255,.68);
      color: var(--text);
      font-size: .78rem;
      font-weight: 800;
      letter-spacing: .02em;
      box-shadow: 0 10px 22px rgba(20,30,50,.07);
      white-space: nowrap;
    }
    .pill strong {
      background: linear-gradient(135deg, var(--seasonA) 0%, var(--seasonB) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .btn {
      border: 0;
      cursor: pointer;
      padding: 12px 14px;
      border-radius: 16px;
      font-weight: 900;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), background .18s var(--ease);
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(20,30,50,.10);
      box-shadow: 0 12px 26px rgba(20,30,50,.08);
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 34px rgba(20,30,50,.10);
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--seasonA) 0%, var(--seasonB) 55%, var(--seasonC) 100%);
      color: #fff;
      border: 1px solid rgba(255,255,255,.35);
      box-shadow: 0 18px 40px color-mix(in srgb, var(--seasonA) 20%, transparent);
    }

    .hero {
      border-radius: calc(var(--radius) + 6px);
      border: 1px solid rgba(255,255,255,.7);
      background:
        radial-gradient(900px 460px at 18% 12%, color-mix(in srgb, var(--seasonA) 20%, transparent) 0%, transparent 60%),
        radial-gradient(850px 420px at 88% 18%, color-mix(in srgb, var(--seasonB) 18%, transparent) 0%, transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.88) 0%, rgba(255,255,255,.68) 100%);
      box-shadow: 0 35px 85px rgba(20,30,50,.16);
      overflow: hidden;
      position: relative;
    }
    .hero:before {
      content:"";
      position:absolute; inset:-2px;
      background:
        conic-gradient(from 220deg at 70% 30%,
          transparent 0deg,
          color-mix(in srgb, var(--seasonA) 28%, transparent) 50deg,
          color-mix(in srgb, var(--seasonB) 22%, transparent) 110deg,
          transparent 160deg,
          color-mix(in srgb, var(--seasonC) 18%, transparent) 230deg,
          transparent 360deg);
      opacity:.75;
      filter: blur(12px);
      pointer-events:none;
    }

    .avatar {
      width: 120px; height: 120px;
      border-radius: 999px;
      border: 6px solid rgba(255,255,255,.9);
      box-shadow: 0 22px 60px rgba(20,30,50,.18);
      object-fit: cover;
      background: #fff;
    }

    .section-title {
      display:flex; align-items:center; gap:.6rem;
      font-weight: 900;
      letter-spacing: -0.02em;
      color: #111827;
    }
    .section-title:before {
      content:"";
      width: 10px; height: 26px;
      border-radius: 999px;
      background: linear-gradient(180deg, var(--seasonA), var(--seasonB));
      box-shadow: 0 10px 20px color-mix(in srgb, var(--seasonA) 18%, transparent);
    }

    .swatch {
      border-radius: 18px;
      border: 1px solid rgba(20,30,50,.10);
      background: rgba(255,255,255,.70);
      overflow:hidden;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), border-color .18s var(--ease);
      text-align:left;
      box-shadow: 0 12px 24px rgba(20,30,50,.08);
    }
    .swatch:hover {
      transform: translateY(-2px);
      border-color: color-mix(in srgb, var(--seasonA) 22%, rgba(20,30,50,.12));
      box-shadow: 0 18px 34px rgba(20,30,50,.10);
    }
    .swatch .color {
      height: 58px;
      border-bottom: 1px solid rgba(20,30,50,.08);
    }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    .meter {
      height: 10px;
      background: rgba(20,30,50,.08);
      border-radius: 999px;
      border: 1px solid rgba(20,30,50,.10);
      overflow:hidden;
    }
    .meter > span {
      display:block; height:100%;
      width: var(--w, 50%);
      background: linear-gradient(90deg, var(--seasonA) 0%, var(--seasonB) 55%, var(--seasonC) 100%);
    }


    /* ---------- A11y + Consist√™ncia de grid ---------- */
    :focus-visible{
      outline: 3px solid color-mix(in srgb, var(--seasonA) 55%, #ffffff);
      outline-offset: 3px;
    }
    .btn:focus-visible, .swatch:focus-visible, select:focus-visible, a:focus-visible{
      box-shadow: 0 0 0 4px color-mix(in srgb, var(--seasonB) 18%, transparent), 0 18px 34px rgba(20,30,50,.10);
    }
    .swatch{
      display: flex;
      flex-direction: column;
      min-height: 138px;
    }
    .swatch .color{ flex: 0 0 58px; }


    /* Toast */
    .toast {
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      padding: 12px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(20,30,50,.10);
      box-shadow: 0 18px 40px rgba(20,30,50,.16);
      font-weight: 900;
    }

    /* Print */
    @media print {
      .topbar, .no-print { display:none !important; }
      body {
        background: #fff !important;
        color: #000 !important;
      }
      .neu-card, .premium-card, .hero {
        box-shadow: none !important;
        border: 1px solid #ddd !important;
      }
    }
  </style>
</head>

<body>
  <!-- Topbar -->
  <header class="topbar">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3">
      <div class="brand">
        <span class="brandMark" aria-hidden="true"></span>
        <div class="leading-tight">
          <div class="text-xl">COLORFY</div>
          <div class="text-xs" style="color: var(--text-secondary); font-weight:800;">Resultado Premium ‚Ä¢ Esta√ß√µes ‚Ä¢ V3.1</div>
        </div>
      </div>

      <div class="flex items-center gap-2 no-print">
        <span class="pill" title="Paleta detectada" id="badgeMode"><i class="fa-solid fa-wand-magic-sparkles"></i> <strong>Oficial</strong></span>

        <label class="pill cursor-pointer" title="Trocar esta√ß√£o para testar o layout">
          <i class="fa-solid fa-layer-group"></i>
          <select id="seasonPicker" class="bg-transparent outline-none font-extrabold text-sm">
            <!-- JS -->
          </select>
        </label>

        <button class="btn" onclick="window.print()" title="Imprimir / salvar PDF">
          <i class="fa-solid fa-print mr-2"></i>PDF
        </button>
        <button class="btn btn-primary" id="btnCopyLink" title="Copiar link com a esta√ß√£o atual">
          <i class="fa-solid fa-link mr-2"></i>Compartilhar
        </button>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-6 md:py-10">
    <!-- HERO -->
    <section class="hero p-6 md:p-8">
      <div class="relative z-10 grid grid-cols-1 md:grid-cols-[auto,1fr] gap-6 md:gap-8 items-center">
        <div class="flex flex-col items-center md:items-start gap-3">
          <img id="userPhoto" class="avatar" alt="Foto do usu√°rio (opcional)" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNDAiIGhlaWdodD0iMjQwIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZyIgeDE9IjAiIHkxPSIwIiB4Mj0iMSIgeTI9IjEiPgogIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPgogIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2YzZjRmNiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+CjxyZWN0IHdpZHRoPSIyNDAiIGhlaWdodD0iMjQwIiByeD0iMTIwIiBmaWxsPSJ1cmwoI2cpIi8+CjxjaXJjbGUgY3g9IjEyMCIgY3k9Ijk1IiByPSI0MiIgZmlsbD0iI2U1ZTdlYiIvPgo8cmVjdCB4PSI0OCIgeT0iMTQ1IiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjcwIiByeD0iMzUiIGZpbGw9IiNlNWU3ZWIiLz4KPHRleHQgeD0iMTIwIiB5PSIyMjYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJJbnRlciwgQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjIiIGZvbnQtd2VpZ2h0PSI4MDAiIGZpbGw9IiMxMTE4MjciPlZPQ8OKPC90ZXh0Pgo8L3N2Zz4=" />
          <div class="no-print w-full">
            <label class="btn w-full text-center block" style="font-weight:900;">
              <i class="fa-solid fa-camera mr-2"></i>Trocar foto
              <input id="photoInput" type="file" accept="image/*" class="hidden" />
            </label>
          </div>
        </div>

        <div class="text-center md:text-left">
          <div class="flex flex-wrap items-center justify-center md:justify-start gap-2 mb-3">
            <span class="pill" id="badgeFamily"><i class="fa-solid fa-leaf"></i> FAM√çLIA</span>
            <span class="pill" id="badgeTemp"><i class="fa-solid fa-temperature-half"></i> TEMP</span>
            <span class="pill" id="badgeContrast"><i class="fa-solid fa-bolt"></i> CONTRASTE</span>
            <span class="pill" id="badgeOlive" style="display:none;"><i class="fa-solid fa-seedling"></i> <strong>Oliva</strong></span>
          </div>

          <h1 class="text-3xl md:text-5xl font-black tracking-tight leading-[1.05] mb-3">
            Sua paleta √© <span id="seasonTitle" class="bg-clip-text text-transparent" style="background-image: linear-gradient(135deg, var(--seasonA), var(--seasonB), var(--seasonC));">‚Äî</span>
          </h1>
          <p id="seasonDesc" class="text-base md:text-lg font-semibold" style="color: var(--text-secondary); line-height:1.6; max-width: 60ch;">
            ‚Äî
          </p>

          <div class="mt-5 grid grid-cols-1 sm:grid-cols-3 gap-3">
            <div class="premium-card p-4">
              <div class="text-xs font-extrabold uppercase" style="color: var(--muted); letter-spacing:.12em;">Subtons</div>
              <div id="seasonSubtones" class="font-extrabold mt-1">‚Äî</div>
            </div>
            <div class="premium-card p-4">
              <div class="text-xs font-extrabold uppercase" style="color: var(--muted); letter-spacing:.12em;">Metais</div>
              <div id="seasonMetals" class="font-extrabold mt-1">‚Äî</div>
            </div>
            <div class="premium-card p-4">
              <div class="text-xs font-extrabold uppercase" style="color: var(--muted); letter-spacing:.12em;">Regra de contraste</div>
              <div id="contrastGuideShort" class="font-extrabold mt-1">‚Äî</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- GRID -->
    <section class="mt-8 grid grid-cols-1 lg:grid-cols-[1.1fr,.9fr] gap-6">
      <!-- LEFT -->
      <div class="space-y-6">
        <!-- Axes -->
        <article class="premium-card p-6">
          <h2 class="section-title text-xl"><span>Mapa do seu rosto</span></h2>
          <p class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);">
            Tradu√ß√£o direta da esta√ß√£o em eixos de apar√™ncia: <span class="font-black">Temperatura</span>, <span class="font-black">Profundidade</span> e <span class="font-black">Croma</span>.
          </p>

          <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="neu-card glass p-4">
              <div class="flex items-center justify-between gap-2">
                <div class="font-black">Temperatura</div>
                <span class="pill"><i class="fa-solid fa-thermometer"></i> <span id="tempLabel">‚Äî</span></span>
              </div>
              <div class="mt-3 meter" aria-hidden="true"><span id="meterTemp"></span></div>
              <div class="mt-2 text-xs font-bold" style="color: var(--muted);" id="tempNote">‚Äî</div>
            </div>

            <div class="neu-card glass p-4">
              <div class="flex items-center justify-between gap-2">
                <div class="font-black">Profundidade</div>
                <span class="pill"><i class="fa-solid fa-circle-half-stroke"></i> <span id="depthTag">‚Äî</span></span>
              </div>
              <div class="mt-3 meter" aria-hidden="true"><span id="meterDepth"></span></div>
              <div class="mt-2 text-xs font-bold" style="color: var(--muted);" id="depthLabel">‚Äî</div>
            </div>

            <div class="neu-card glass p-4">
              <div class="flex items-center justify-between gap-2">
                <div class="font-black">Croma</div>
                <span class="pill"><i class="fa-solid fa-droplet"></i> <span id="chromaTag">‚Äî</span></span>
              </div>
              <div class="mt-3 meter" aria-hidden="true"><span id="meterChroma"></span></div>
              <div class="mt-2 text-xs font-bold" style="color: var(--muted);" id="chromaLabel">‚Äî</div>
            </div>
          </div>

          <div class="mt-5 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="premium-card p-5" style="background: linear-gradient(135deg, rgba(255,255,255,.85), rgba(255,255,255,.65));">
              <div class="flex items-start gap-3">
                <span class="pill"><i class="fa-solid fa-check"></i> Use assim</span>
                <p class="text-sm font-semibold" style="color: var(--text-secondary);" id="contrastGuide">
                  ‚Äî
                </p>
              </div>
            </div>
            <div class="premium-card p-5" style="background: linear-gradient(135deg, rgba(255,255,255,.85), rgba(255,255,255,.65));">
              <div class="flex items-start gap-3">
                <span class="pill"><i class="fa-solid fa-triangle-exclamation"></i> Evite</span>
                <p class="text-sm font-semibold" style="color: var(--text-secondary);" id="avoidList">
                  ‚Äî
                </p>
              </div>
            </div>
          </div>
        </article>

        <!-- Palette -->
        <article class="premium-card p-6">
          <div class="flex items-center justify-between gap-3 flex-wrap">
            <h2 class="section-title text-xl"><span>Paleta principal</span></h2>
            <span class="pill"><i class="fa-solid fa-hand-pointer"></i> Clique para copiar HEX</span>
          </div>

          <div class="mt-6">
            <div class="text-xs font-extrabold uppercase" style="color: var(--muted); letter-spacing:.12em;">Neutros essenciais</div>
            <div id="neutralsGrid" class="mt-3 grid grid-cols-2 sm:grid-cols-4 gap-3"></div>
          </div>

          <div class="mt-6 md:mt-8">
            <div class="text-xs font-extrabold uppercase" style="color: var(--muted); letter-spacing:.12em;">Cores de destaque</div>
            <div id="highlightsGrid" class="mt-3 grid grid-cols-2 sm:grid-cols-5 gap-3"></div>
          </div>

          <div class="mt-6 md:mt-8 neu-card glass p-5">
            <div class="flex items-center justify-between gap-3 flex-wrap">
              <div class="font-black">Combina√ß√µes prontas (1 clique)</div>
              <button class="btn btn-primary no-print" id="btnShuffleFits"><i class="fa-solid fa-wand-magic-sparkles mr-2"></i>Gerar looks</button>
            </div>
            <p class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);">
              Use como ‚Äúatalho‚Äù para escolher roupa/maquiagem sem pensar demais.
            </p>
            <div id="fitsGrid" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
          </div>
        </article>
      </div>

      <!-- RIGHT -->
      <aside class="space-y-6">
        <!-- Real world -->
        <article class="premium-card p-6">
          <h2 class="section-title text-xl"><span>Beleza no mundo real</span></h2>

          <div class="mt-5 grid grid-cols-1 gap-4">
            <div class="neu-card glass p-5">
              <div class="flex items-center gap-2 font-black"><i class="fa-solid fa-lipstick" style="color: var(--seasonA)"></i> Maquiagem</div>
              <div class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);">
                <div><span class="font-black">Batom:</span> <span id="makeupLip">‚Äî</span></div>
                <div class="mt-1"><span class="font-black">Blush:</span> <span id="makeupBlush">‚Äî</span></div>
                <div class="mt-2"><span class="font-black">Dica:</span> <span id="makeupTip">‚Äî</span></div>
              </div>
            </div>

            <div class="neu-card glass p-5">
              <div class="flex items-center gap-2 font-black"><i class="fa-solid fa-scissors" style="color: var(--seasonB)"></i> Cabelo</div>
              <div class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);" id="hairTips">‚Äî</div>
            </div>

            <div class="neu-card glass p-5">
              <div class="flex items-center gap-2 font-black"><i class="fa-solid fa-gem" style="color: var(--seasonC)"></i> Metais & acess√≥rios</div>
              <div class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);">
                <div id="metalsLong">‚Äî</div>
                <div class="mt-2 text-xs font-bold" style="color: var(--muted);">
                  Regra r√°pida: escolha metais pr√≥ximos ao seu subtom e use o ‚Äúoutro‚Äù s√≥ como detalhe.
                </div>
              </div>
            </div>

            <div class="neu-card glass p-5">
              <div class="flex items-center gap-2 font-black"><i class="fa-solid fa-bag-shopping" style="color: var(--seasonA)"></i> Lista de compras</div>
              <div class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);" id="shoppingList">‚Äî</div>
            </div>
          </div>
        </article>

        <!-- Nearby -->
        <article class="premium-card p-6">
          <div class="flex items-center justify-between gap-3 flex-wrap">
            <h2 class="section-title text-xl"><span>Varia√ß√µes (para comparar)</span></h2>
            <span class="pill"><i class="fa-solid fa-arrows-rotate"></i> Troque no topo</span>
          </div>
          <div id="nearbySeasons" class="mt-5 grid grid-cols-1 gap-3"></div>
        </article>

        <!-- Footer actions -->
        <article class="premium-card p-6">
          <h2 class="section-title text-xl"><span>Pr√≥ximos passos</span></h2>
          <p class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);">
            Quer deixar isso ainda mais ‚Äúde luxo‚Äù? Use sua paleta em: <span class="font-black">cabelo</span>, <span class="font-black">sobrancelha</span>, <span class="font-black">√≥culos</span>, <span class="font-black">joias</span> e <span class="font-black">tecidos</span>.
          </p>

          <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 no-print">
            <button class="btn btn-primary" id="btnDownloadGuide"><i class="fa-solid fa-file-arrow-down mr-2"></i>Salvar resumo</button>
            <button class="btn" onclick="window.scrollTo({top:0, behavior:'smooth'})"><i class="fa-solid fa-arrow-up mr-2"></i>Topo</button>
          </div>
        </article>
      </aside>
    </section>

    <footer class="mt-10 pb-8 text-center text-xs font-bold" style="color: var(--muted);">
      Feito para combinar com o visual do <span class="font-black">index_final_corrigido</span> ‚Ä¢ P√°gina standalone estilo <span class="font-black">ronaldo.html</span>.
    </footer>
  </main>

  <script>
    /* =========================================================
       COLORFY ‚Äî RESULTADO PREMIUM (Standalone)
       - Layout premium que combina com index_final_corrigido
       - Suporte a todas as esta√ß√µes presentes no index (inclui Oliva)
       ========================================================= */

    /* ---------- SEASONAL DATA (copiado do index_final_corrigido) ---------- */
    window.SEASONAL_DATA = {
      // üå∏ PRIMAVERA
      "spring_light": {
        title: "Primavera Clara (Light Spring)",
        theme: "from-yellow-50 to-pink-50 border-yellow-200",
        accent: "text-amber-500",
        desc: "Quente, claro e delicado. Sua beleza brilha com cores iluminadas pelo sol.",
        subtones: "P√™ssego, Dourado suave.",
        neutrals: [
          { name: "Creme", hex: "#FFFDD0" }, { name: "Bege Dourado", hex: "#F5F5DC" },
          { name: "Cinza Quente", hex: "#AFAFAF" }, { name: "Marrom Claro", hex: "#C4A484" }
        ],
        highlights: [
          { name: "P√™ssego", hex: "#FFDAB9" }, { name: "Coral Claro", hex: "#F08080" },
          { name: "Amarelo Manteiga", hex: "#FFFACD" }, { name: "Verde Claro", hex: "#90EE90" },
          { name: "Turquesa Suave", hex: "#AFEEEE" }
        ],
        makeup: { batom: "Coral rosado, P√™ssego, Nude quente.", blush: "P√™ssego ou Coral suave." },
        hair: "Loiro dourado, Castanho claro quente, Ruivo morango.",
        avoid: "Preto puro, cinzas frios, tons muito escuros e fechados.",
        contrast_guide: "Baixo a m√©dio. Evite contrastes pesados que ofusquem sua delicadeza."
      },
      "spring_warm": {
        title: "Primavera Quente (True Spring)",
        theme: "from-orange-50 to-yellow-50 border-orange-300",
        accent: "text-orange-600",
        desc: "Quente puro, vibrante e cheio de energia. Cores vivas s√£o essenciais.",
        subtones: "Dourado intenso, Mel.",
        neutrals: [
          { name: "Marrom Dourado", hex: "#966F33" }, { name: "Camel", hex: "#C19A6B" },
          { name: "Creme Rico", hex: "#F3E5AB" }, { name: "Azul Marinho Quente", hex: "#000080" }
        ],
        highlights: [
          { name: "Laranja", hex: "#FFA500" }, { name: "Tomate", hex: "#FF6347" },
          { name: "Dourado", hex: "#FFD700" }, { name: "Verde Vivo", hex: "#32CD32" },
          { name: "Coral Vivo", hex: "#FF7F50" }
        ],
        makeup: { batom: "Laranja, Coral vibrante, Vermelho tomate.", blush: "Coral ou Bronze." },
        hair: "Ruivo acobreado, Loiro mel, Castanho dourado.",
        avoid: "Tons frios azulados, rosados frios (f√∫csia, bord√¥).",
        contrast_guide: "M√©dio. Voc√™ segura bem cores com vivacidade."
      },
      "spring_bright": {
        title: "Primavera Brilhante (Bright Spring)",
        theme: "from-rose-50 to-yellow-50 border-rose-400",
        accent: "text-rose-600",
        desc: "Quente neutro, intenso e contrastante. Uma mistura vibrante de Primavera com influ√™ncia de Inverno.",
        subtones: "Neutro-quente, Brilhante.",
        neutrals: [
          { name: "Preto (com cor)", hex: "#2C2C2C" }, { name: "Cinza Chumbo", hex: "#333333" },
          { name: "Taupe", hex: "#483C32" }, { name: "Marrom Escuro", hex: "#654321" }
        ],
        highlights: [
          { name: "Coral Vibrante", hex: "#FF4040" }, { name: "Turquesa Forte", hex: "#00CED1" },
          { name: "Verde Lima", hex: "#32CD32" }, { name: "Rosa Quente", hex: "#FF69B4" },
          { name: "Amarelo Gema", hex: "#FFD700" }
        ],
        makeup: { batom: "Rosa vibrante, Coral intenso, Vermelho melancia.", blush: "Rosa quente." },
        hair: "Castanho escuro, Preto natural, Loiro platinado (se quente).",
        avoid: "Tons apagados, opacos, past√©is empoeirados.",
        contrast_guide: "Alto. Use blocos de cor (color blocking) sem medo."
      },

      // ‚òÄÔ∏è VER√ÉO
      "summer_light": {
        title: "Ver√£o Claro (Light Summer)",
        theme: "from-blue-50 to-pink-50 border-blue-200",
        accent: "text-sky-600",
        desc: "Frio, claro e et√©reo. Cores suaves com frescor.",
        subtones: "Rosado, Azulado suave.",
        neutrals: [
          { name: "Cinza Claro", hex: "#D3D3D3" }, { name: "Azul Acinzentado", hex: "#B0C4DE" },
          { name: "Off-White", hex: "#F8F8FF" }, { name: "Areia Frio", hex: "#C2B280" }
        ],
        highlights: [
          { name: "Rosa Beb√™", hex: "#FFB6C1" }, { name: "Azul C√©u", hex: "#87CEEB" },
          { name: "Lil√°s", hex: "#C8A2C8" }, { name: "Menta Fria", hex: "#98FF98" },
          { name: "Framboesa Suave", hex: "#E30B5C" }
        ],
        makeup: { batom: "Rosa claro, Malva suave.", blush: "Rosa frio." },
        hair: "Loiro cinza claro, Loiro platinado perolado.",
        avoid: "Laranja, amarelo forte, marrom quente, preto pesado.",
        contrast_guide: "Baixo. Mantenha as combina√ß√µes leves e fluidas."
      },
      "summer_soft": {
        title: "Ver√£o Suave (Soft Summer)",
        theme: "from-slate-50 to-emerald-50 border-slate-300",
        accent: "text-slate-600",
        desc: "Frio neutralizado, suave e elegante. A esta√ß√£o mais complexa e sofisticada.",
        subtones: "Neutro-frio, Opaco.",
        neutrals: [
          { name: "Cinza M√©dio", hex: "#808080" }, { name: "Taupe Rosado", hex: "#BC987E" },
          { name: "Azul Marinho Suave", hex: "#4C516D" }, { name: "Cacau", hex: "#875F42" }
        ],
        highlights: [
          { name: "Malva", hex: "#E0B0FF" }, { name: "Cinza Azulado", hex: "#6699CC" },
          { name: "Verde S√°lvia", hex: "#9DC183" }, { name: "Lavanda Empoeirada", hex: "#967BB6" },
          { name: "Bord√¥ Suave", hex: "#800020" }
        ],
        makeup: { batom: "Nude rosado, Malva, Ameixa suave.", blush: "Rosa antigo." },
        hair: "Loiro cinza escuro (dirty blonde), Castanho claro cinza.",
        avoid: "Cores neon, vibrantes demais, preto puro, laranja.",
        contrast_guide: "Baixo a m√©dio. O tom sobre tom (monocrom√°tico) fica incr√≠vel."
      },
      "summer_cool": {
        title: "Ver√£o Frio (Cool Summer)",
        theme: "from-blue-50 to-indigo-50 border-blue-300",
        accent: "text-indigo-600",
        desc: "Frio puro, sereno e cl√°ssico. Evite qualquer calor na paleta.",
        subtones: "Azulado, Rosado puro.",
        neutrals: [
          { name: "Azul Marinho", hex: "#000080" }, { name: "Carv√£o", hex: "#36454F" },
          { name: "Branco Suave", hex: "#F5F5F5" }, { name: "Cinza Azulado", hex: "#778899" }
        ],
        highlights: [
          { name: "Azul Royal Suave", hex: "#4169E1" }, { name: "Rosa Frio", hex: "#FF69B4" },
          { name: "Violeta", hex: "#8A2BE2" }, { name: "Framboesa", hex: "#E30B5C" },
          { name: "Verde Esmeralda Frio", hex: "#008000" }
        ],
        makeup: { batom: "Rosa chiclete, Pink suave, Rubi.", blush: "Rosa frio." },
        hair: "Castanho cinza, Preto suave, Loiro platinado acinzentado.",
        avoid: "Dourados, laranjas, terrosos quentes (tijolo, mostarda).",
        contrast_guide: "M√©dio. Cores frias criam uma harmonia natural."
      },

      // üçÇ OUTONO
      "autumn_soft": {
        title: "Outono Suave (Soft Autumn)",
        theme: "from-stone-50 to-orange-50 border-stone-300",
        accent: "text-stone-600",
        desc: "Quente neutralizado, suave e natural. Uma mistura rica de terra e luz difusa.",
        subtones: "Neutro-quente, Oliva suave.",
        neutrals: [
          { name: "Camelo", hex: "#C19A6B" }, { name: "Caqui", hex: "#F0E68C" },
          { name: "Marrom Caf√©", hex: "#4B3621" }, { name: "Creme", hex: "#FFFDD0" }
        ],
        highlights: [
          { name: "Oliva Claro", hex: "#808000" }, { name: "Terracota Suave", hex: "#E2725B" },
          { name: "P√™ssego Queimado", hex: "#FFCC99" }, { name: "Salm√£o", hex: "#FA8072" },
          { name: "Verde Musgo", hex: "#8A9A5B" }
        ],
        makeup: { batom: "Nude p√™ssego, Terracota, Marrom rosado.", blush: "P√™ssego bronze." },
        hair: "Castanho dourado suave, Loiro mel, Acobreado sut√≠l.",
        avoid: "Preto puro, cores frias vibrantes (pink, azul el√©trico).",
        contrast_guide: "M√©dio-baixo. Texturas naturais e cores foscas favorecem muito."
      },
      "autumn_warm": {
        title: "Outono Quente (True Autumn)",
        theme: "from-orange-100 to-amber-50 border-orange-400",
        accent: "text-amber-700",
        desc: "Quente puro, rico e terroso. A ess√™ncia das folhas de outono.",
        subtones: "Dourado profundo, Bronze.",
        neutrals: [
          { name: "Marrom Chocolate", hex: "#D2691E" }, { name: "Bege Quente", hex: "#F5F5DC" },
          { name: "Verde Militar", hex: "#4B5320" }, { name: "Ferrugem", hex: "#B7410E" }
        ],
        highlights: [
          { name: "Mostarda", hex: "#FFDB58" }, { name: "Laranja Queimado", hex: "#CC5500" },
          { name: "Oliva Intenso", hex: "#556B2F" }, { name: "Vermelho Tomate Escuro", hex: "#BF616A" },
          { name: "Bronze", hex: "#CD7F32" }
        ],
        makeup: { batom: "Tijolo, Cobre, Vermelho quente.", blush: "Terracota ou Bronze." },
        hair: "Ruivo intenso, Castanho acobreado, Castanho dourado.",
        avoid: "Tons frios azulados, rosa chiclete, cinza chumbo.",
        contrast_guide: "M√©dio. Cores ricas e saturadas (mas terrosas) funcionam bem."
      },
      "autumn_deep": {
        title: "Outono Profundo (Deep Autumn)",
        theme: "from-orange-50 to-stone-100 border-orange-200",
        accent: "text-orange-900",
        desc: "Quente neutro, profundo e nobre. Onde o calor encontra a escurid√£o.",
        subtones: "Oliva quente, Dourado, Quente puro.",
        neutrals: [
          { name: "Chocolate Escuro", hex: "#381819" }, { name: "Caramelo Escuro", hex: "#8A5A2E" },
          { name: "Oliva Escuro", hex: "#3C4023" }, { name: "Preto Quente", hex: "#1E1613" }
        ],
        highlights: [
          { name: "Bord√¥", hex: "#5A1F1F" }, { name: "Tijolo", hex: "#9A3B2E" },
          { name: "Verde Bosque", hex: "#254025" }, { name: "Dourado Velho", hex: "#B08C3A" },
          { name: "Ameixa", hex: "#4B2C3F" }
        ],
        makeup: { batom: "Vinho quente, Ameixa, Tijolo intenso.", blush: "Terracota escuro." },
        hair: "Castanho profundo quente, Chocolate com reflexos dourados.",
        avoid: "Past√©is frios, rosados frios, cinzas claros, cores neon.",
        contrast_guide: "M√©dio-alto. Use o claro/escuro a seu favor (profundidade)."
      },

      // ‚ùÑÔ∏è INVERNO
      "winter_bright": {
        title: "Inverno Brilhante (Bright Winter)",
        theme: "from-fuchsia-50 to-cyan-50 border-fuchsia-400",
        accent: "text-fuchsia-700",
        desc: "Frio, vibrante e el√©trico. Alto contraste e cores puras definem voc√™.",
        subtones: "Neutro-frio, Brilhante.",
        neutrals: [
          { name: "Preto Absoluto", hex: "#000000" }, { name: "Branco Puro", hex: "#FFFFFF" },
          { name: "Cinza Gelo", hex: "#EFF0F1" }, { name: "Marinho Profundo", hex: "#000080" }
        ],
        highlights: [
          { name: "F√∫csia (Pink)", hex: "#FF00FF" }, { name: "Azul Royal", hex: "#4169E1" },
          { name: "Vermelho Cereja", hex: "#DE3163" }, { name: "Verde Esmeralda", hex: "#50C878" },
          { name: "Amarelo Lim√£o", hex: "#FAFA33" }
        ],
        makeup: { batom: "Pink vibrante, Vermelho puro, Rubi.", blush: "Rosa frio." },
        hair: "Preto azulado, Castanho escuro, Grisalho prateado.",
        avoid: "Terrosos quentes (bege, laranja, dourado), tons opacos e suaves.",
        contrast_guide: "Alto. Preto e branco juntos ficam perfeitos em voc√™."
      },
      "winter_cool": {
        title: "Inverno Frio (True Winter)",
        theme: "from-blue-100 to-slate-100 border-blue-500",
        accent: "text-blue-800",
        desc: "Frio puro, intenso e majestoso. A rainha das neves.",
        subtones: "Azulado intenso.",
        neutrals: [
          { name: "Preto", hex: "#000000" }, { name: "Branco", hex: "#FFFFFF" },
          { name: "Cinza A√ßo", hex: "#4682B4" }, { name: "Marinho", hex: "#000080" }
        ],
        highlights: [
          { name: "Azul Cobalto", hex: "#0047AB" }, { name: "Roxo Real", hex: "#7851A9" },
          { name: "Rosa Choque", hex: "#FC0FC0" }, { name: "Vinho Frio", hex: "#722F37" },
          { name: "Verde Pinho", hex: "#01796F" }
        ],
        makeup: { batom: "Rosa frio, Roxo, Vinho.", blush: "Ameixa ou Rosa frio." },
        hair: "Preto azeviche, Castanho escuro frio, Grisalho branco.",
        avoid: "Dourado (use prata), laranja, marrom quente, tons amarelados.",
        contrast_guide: "M√©dio-alto. Mantenha a pureza e frieza das cores."
      },
      "winter_deep": {
        title: "Inverno Profundo (Deep Winter)",
        theme: "from-slate-100 to-gray-200 border-slate-500",
        accent: "text-slate-900",
        desc: "Frio neutro, profundo e misterioso. Uma intensidade noturna.",
        subtones: "Neutro-frio, Oliva escuro.",
        neutrals: [
          { name: "Preto", hex: "#000000" }, { name: "Grafite", hex: "#383838" },
          { name: "Marrom Caf√© Frio", hex: "#4B3621" }, { name: "Azul Noite", hex: "#191970" }
        ],
        highlights: [
          { name: "Vinho Profundo", hex: "#59090C" }, { name: "Verde Floresta", hex: "#228B22" },
          { name: "Ameixa", hex: "#673147" }, { name: "Azul Marinho", hex: "#000080" },
          { name: "Vermelho Sangue", hex: "#8A0303" }
        ],
        makeup: { batom: "Vinho, Berinjela, Vermelho profundo.", blush: "Vinho ou Ameixa." },
        hair: "Preto, Castanho muito escuro, Prata escuro.",
        avoid: "Tons past√©is claros demais (te apagam), p√™ssego, terra claro.",
        contrast_guide: "Alto. Combine cores escuras com detalhes claros e vibrantes."
      }
    };

    /* ---------- Helpers ---------- */
    const $ = (q) => document.querySelector(q);

    function safeColor(hex, fallback="#782ce7"){
      if(!hex) return fallback;
      const ok = /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(hex);
      return ok ? hex : fallback;
    }

    function toast(msg){
      const el = document.createElement("div");
      el.className = "toast";
      el.textContent = msg;
      document.body.appendChild(el);
      setTimeout(()=> el.remove(), 1400);
    }

    function inferAxes(seasonKey){
      // temp: cool=15 warm=85
      const warm = seasonKey.includes("spring") || seasonKey.includes("autumn");
      const temp = warm ? 85 : 15;

      // depth: light=20 deep=85 (default 55)
      let depth = 55;
      if(seasonKey.includes("light")) depth = 20;
      if(seasonKey.includes("deep")) depth = 85;

      // chroma: soft=25 bright=85 (default 55)
      let chroma = 55;
      if(seasonKey.includes("soft")) chroma = 25;
      if(seasonKey.includes("bright")) chroma = 85;

      return { temp, depth, chroma };
    }

    function tagsFromAxes(axes){
      const depthTag = axes.depth < 35 ? "Clara" : (axes.depth > 70 ? "Profunda" : "M√©dia");
      const chromaTag = axes.chroma < 35 ? "Suave" : (axes.chroma > 70 ? "Brilhante" : "M√©dia");
      const tempTag = axes.temp > 50 ? "Quente" : "Fria";
      return { depthTag, chromaTag, tempTag };
    }

    function metalsFor(seasonKey, isOlive){
      const warm = seasonKey.includes("spring") || seasonKey.includes("autumn");
      if(isOlive) return "Dourado suave + prata (equil√≠brio) / bronze acetinado";
      return warm ? "Dourado, champagne, bronze" : "Prata, a√ßo, platina";
    }

    function makeupTipFor(seasonKey){
      if(seasonKey.includes("winter")) return "Prefira linhas mais definidas (delineado, boca marcada). Evite tons amarelados.";
      if(seasonKey.includes("summer")) return "Acabamento suave e esfumado. Fuja de laranjas/terrosos quentes.";
      if(seasonKey.includes("spring")) return "Luminosidade e frescor: brilho controlado + cores vivas/claras no ponto certo.";
      return "Textura aveludada e terrosa: oliva, terracota e marrons quentes com acabamento mais fosco/chic.";
    }

    function relatedSeasons(seasonKey){
      if (seasonKey.includes("spring")) return ["spring_light", "spring_warm", "spring_bright"];
      if (seasonKey.includes("summer")) return ["summer_light", "summer_cool", "summer_soft"];
      if (seasonKey.includes("autumn")) return ["autumn_soft", "autumn_warm", "autumn_deep"];
      return ["winter_bright", "winter_cool", "winter_deep"];
    }

    function applyThemeTokens(data){
      // Usa as cores do dataset para ‚Äúpintar‚Äù a p√°gina
      const a = safeColor(data?.highlights?.[0]?.hex, "#782ce7");
      const b = safeColor(data?.highlights?.[1]?.hex, "#0ab6ce");
      const c = safeColor(data?.highlights?.[2]?.hex, "#4f46e5");
      const n1 = safeColor(data?.neutrals?.[0]?.hex, "#ffffff");
      const n2 = safeColor(data?.neutrals?.[1]?.hex, "#f3f4f6");

      const r = document.documentElement.style;
      r.setProperty("--seasonA", a);
      r.setProperty("--seasonB", b);
      r.setProperty("--seasonC", c);
      r.setProperty("--seasonN1", n1);
      r.setProperty("--seasonN2", n2);
    }

    
    function renderSwatches(list, mountId){
      const mount = document.getElementById(mountId);
      if(!mount) return;

      const items = Array.isArray(list) ? list : [];
      if(items.length === 0){
        const span = (mountId === "highlightsGrid") ? "col-span-2 sm:col-span-5" : "col-span-2 sm:col-span-4";
        mount.innerHTML = `
          <div class="${span} neu-card glass p-4">
            <div class="flex items-center gap-2">
              <span class="pill"><i class="fa-solid fa-circle-info"></i> Dado indispon√≠vel</span>
            </div>
            <div class="mt-2 font-black">Nenhuma cor para exibir aqui.</div>
            <div class="mt-1 text-sm font-semibold" style="color: var(--text-secondary);">
              Selecione uma esta√ß√£o no topo ou recarregue a p√°gina.
            </div>
          </div>
        `;
        return;
      }

      mount.innerHTML = items.map(c => {
        const hex = safeColor(c.hex);
        const name = (c.name || "Cor");
        return `
          <button class="swatch p-0" type="button" title="Copiar ${name} ‚Äî ${hex}"
            onclick="navigator.clipboard.writeText('${hex}'); toast('Copiado: ${hex}');">
            <div class="color" style="background:${hex}"></div>
            <div class="p-3 flex items-center justify-between gap-2">
              <div class="min-w-0">
                <div class="text-sm font-black leading-tight truncate">${name}</div>
                <div class="mono text-xs font-bold" style="color: var(--muted)">${hex}</div>
              </div>
              <span class="pill" aria-hidden="true"><i class="fa-solid fa-copy"></i></span>
            </div>
          </button>
        `;
      }).join("");
    }


    function buildLooks(data){
      const neutrals = (data.neutrals || []).slice(0, 4);
      const highs = (data.highlights || []).slice(0, 5);
      if(!neutrals.length || !highs.length) return [];

      // Gera 6 looks ‚Äúbons o suficiente‚Äù usando combina√ß√µes seguras
      const picks = [];
      const combos = [
        [0, 0, 1],
        [1, 2, 0],
        [2, 1, 3],
        [3, 3, 2],
        [0, 4, 2],
        [1, 1, 4],
      ];

      combos.forEach(([nIdx, hIdx, h2Idx], i) => {
        const n = neutrals[nIdx % neutrals.length];
        const h = highs[hIdx % highs.length];
        const h2 = highs[h2Idx % highs.length];
        picks.push({
          title: `Look ${i+1}`,
          base: n,
          accent: h,
          pop: h2,
        });
      });
      return picks;
    }

    
    function renderLooks(data){
      const mount = $("#fitsGrid");
      const looks = buildLooks(data);

      if(!looks.length){
        mount.innerHTML = `
          <div class="neu-card glass p-4">
            <div class="flex items-center justify-between gap-2">
              <div class="font-black">Sem combina√ß√µes agora</div>
              <span class="pill"><i class="fa-solid fa-circle-info"></i> Info</span>
            </div>
            <div class="mt-2 text-sm font-semibold" style="color: var(--text-secondary);">
              Isso acontece quando a paleta n√£o tem neutros/destaques suficientes. Troque a esta√ß√£o no topo.
            </div>
          </div>
        `;
        return;
      }

      mount.innerHTML = looks.map(l => {
        const base = safeColor(l.base.hex);
        const accent = safeColor(l.accent.hex);
        const pop = safeColor(l.pop.hex);
        return `
          <div class="neu-card glass p-4">
            <div class="flex items-center justify-between gap-2">
              <div class="font-black">${l.title}</div>
              <button class="btn no-print" style="padding:8px 10px; border-radius:14px;"
                onclick="navigator.clipboard.writeText('${l.base.name} ${base} | ${l.accent.name} ${accent} | ${l.pop.name} ${pop}'); toast('Look copiado!');">
                <i class="fa-solid fa-copy"></i>
              </button>
            </div>
            <div class="mt-3 grid grid-cols-3 gap-2">
              <div class="swatch">
                <div class="color" style="background:${base}"></div>
                <div class="p-2">
                  <div class="text-xs font-black truncate">${l.base.name}</div>
                  <div class="mono text-[11px] font-bold" style="color: var(--muted)">${base}</div>
                </div>
              </div>
              <div class="swatch">
                <div class="color" style="background:${accent}"></div>
                <div class="p-2">
                  <div class="text-xs font-black truncate">${l.accent.name}</div>
                  <div class="mono text-[11px] font-bold" style="color: var(--muted)">${accent}</div>
                </div>
              </div>
              <div class="swatch">
                <div class="color" style="background:${pop}"></div>
                <div class="p-2">
                  <div class="text-xs font-black truncate">${l.pop.name}</div>
                  <div class="mono text-[11px] font-bold" style="color: var(--muted)">${pop}</div>
                </div>
              </div>
            </div>
          </div>
        `;
      }).join("");
    }


    function renderNearby(seasonKey){
      const mount = $("#nearbySeasons");
      const near = relatedSeasons(seasonKey);
      mount.innerHTML = near.map(k => {
        const s = window.SEASONAL_DATA[k];
        if(!s) return "";
        const active = (k === seasonKey);
        const bar = `linear-gradient(90deg, ${safeColor(s.highlights?.[0]?.hex, "#782ce7")}, ${safeColor(s.highlights?.[1]?.hex, "#0ab6ce")})`;
        return `
          <button class="neu-card glass p-4 text-left" type="button"
            onclick="setSeasonByKey('${k}');"
            style="border:1px solid ${active ? "color-mix(in srgb, var(--seasonA) 30%, rgba(255,255,255,.8))" : "rgba(255,255,255,.55)"};">
            <div class="text-xs font-extrabold uppercase" style="color: var(--muted); letter-spacing:.12em;">
              ${active ? "Sua paleta" : "Varia√ß√£o"}
            </div>
            <div class="mt-1 font-black">${s.title.split('(')[0].trim()}</div>
            <div class="h-2 rounded-full mt-3" style="background:${bar}"></div>
          </button>
        `;
      }).join("");
    }

    function buildShoppingList(data, seasonKey, isOlive){
      const warm = seasonKey.includes("spring") || seasonKey.includes("autumn");
      const base = (data.neutrals || []).slice(0, 3).map(c => c.name).join(", ");
      const pop = (data.highlights || []).slice(0, 3).map(c => c.name).join(", ");
      const metal = metalsFor(seasonKey, isOlive);
      const shoes = warm ? "caramelo, conhaque, marrom dourado" : "cinza, marinho, vinho frio";
      const jeans = seasonKey.includes("winter") ? "preto, grafite, √≠ndigo escuro" :
                    seasonKey.includes("summer") ? "azul m√©dio acinzentado, cinza claro" :
                    seasonKey.includes("spring") ? "azul claro, √≠ndigo m√©dio" :
                    "√≠ndigo escuro, marrom chocolate";

      return `Base: ${base || "‚Äî"}. Pontos de cor: ${pop || "‚Äî"}. Metais: ${metal}. Sapatos/bolsas: ${shoes}. Jeans: ${jeans}.`;
    }

    /* ---------- Season mapping (igual ao index + oliva) ---------- */
    const NAME_TO_KEY = {
      "Primavera Clara": "spring_light",
      "Primavera Quente": "spring_warm",
      "Primavera Brilhante": "spring_bright",
      "Ver√£o Claro": "summer_light",
      "Ver√£o Suave": "summer_soft",
      "Ver√£o Frio": "summer_cool",
      "Outono Suave": "autumn_soft",
      "Outono Quente": "autumn_warm",
      "Outono Profundo": "autumn_deep",
      "Inverno Brilhante": "winter_bright",
      "Inverno Frio": "winter_cool",
      "Inverno Profundo": "winter_deep",

      // Olivas (presentes no index)
      "Primavera Quente Oliva": "spring_warm",
      "Outono Quente Oliva": "autumn_warm",
      "Outono Profundo Oliva": "autumn_deep",
      "Ver√£o Frio Oliva": "summer_cool",
      "Inverno Frio Oliva": "winter_cool",
      "Inverno Profundo Oliva": "winter_deep"
    };

    const PICKER_OPTIONS = [
      "Primavera Clara","Primavera Quente","Primavera Brilhante",
      "Ver√£o Claro","Ver√£o Suave","Ver√£o Frio",
      "Outono Suave","Outono Quente","Outono Profundo",
      "Inverno Brilhante","Inverno Frio","Inverno Profundo",
      "Primavera Quente Oliva","Ver√£o Frio Oliva","Outono Quente Oliva","Outono Profundo Oliva","Inverno Frio Oliva","Inverno Profundo Oliva"
    ];

    function getQueryParam(name){
      const u = new URL(window.location.href);
      return u.searchParams.get(name);
    }

    function setQueryParam(name, value){
      const u = new URL(window.location.href);
      u.searchParams.set(name, value);
      history.replaceState(null, "", u.toString());
    }

    function setSeasonByName(seasonName){
      const key = NAME_TO_KEY[seasonName] || "autumn_deep";
      setQueryParam("season", seasonName);
      renderResult({ final_palette: { name: seasonName } });
      // manter picker em sincronia
      const picker = $("#seasonPicker");
      if(picker) picker.value = seasonName;
    }

    function setSeasonByKey(seasonKey){
      // acha o primeiro nome que bate na chave
      const name = Object.keys(NAME_TO_KEY).find(n => NAME_TO_KEY[n] === seasonKey && !n.includes("Oliva")) || "Outono Profundo";
      setSeasonByName(name);
    }

    function renderResult(analysis){
      const seasonName = analysis?.final_palette?.name || "Outono Profundo";
      const seasonKey = NAME_TO_KEY[seasonName] || "autumn_deep";
      const data = window.SEASONAL_DATA[seasonKey] || window.SEASONAL_DATA["autumn_deep"];
      const isOlive = String(seasonName).includes("Oliva");

      applyThemeTokens(data);

      // Badges
      $("#badgeMode").innerHTML = isOlive
        ? '<i class="fa-solid fa-seedling"></i> <strong>Oliva</strong>'
        : '<i class="fa-solid fa-wand-magic-sparkles"></i> <strong>Oficial</strong>';

      const family = seasonKey.split("_")[0].toUpperCase();
      $("#badgeFamily").innerHTML = '<i class="fa-solid fa-leaf"></i> ' + family;

      const warm = seasonKey.includes("spring") || seasonKey.includes("autumn");
      $("#badgeTemp").innerHTML = warm
        ? '<i class="fa-solid fa-sun"></i> Quente/Neutro-quente'
        : '<i class="fa-solid fa-snowflake"></i> Frio/Neutro-frio';

      $("#badgeOlive").style.display = isOlive ? "inline-flex" : "none";

      // Hero copy
      $("#seasonTitle").textContent = data.title || seasonName;
      $("#seasonDesc").textContent = data.desc || "‚Äî";
      $("#seasonSubtones").textContent = data.subtones || "‚Äî";
      $("#seasonMetals").textContent = metalsFor(seasonKey, isOlive);
      $("#metalsLong").textContent = metalsFor(seasonKey, isOlive);

      const cg = (data.contrast_guide || "Equilibre combina√ß√µes conforme seu contraste natural.");
      $("#contrastGuideShort").textContent = cg.split(".")[0] + ".";
      $("#contrastGuide").textContent = cg;
      $("#avoidList").textContent = data.avoid || "‚Äî";

      // Axes
      const axes = inferAxes(seasonKey);
      const tags = tagsFromAxes(axes);

      $("#tempLabel").textContent = tags.tempTag;
      $("#depthTag").textContent = tags.depthTag;
      $("#chromaTag").textContent = tags.chromaTag;

      $("#meterTemp").style.setProperty("--w", `${axes.temp}%`);
      $("#meterDepth").style.setProperty("--w", `${axes.depth}%`);
      $("#meterChroma").style.setProperty("--w", `${axes.chroma}%`);

      $("#tempNote").textContent = warm
        ? "Cores com base dourada/amelada tendem a iluminar."
        : "Cores com base rosada/azulada tendem a ‚Äúacender‚Äù a pele.";

      $("#depthLabel").textContent  = axes.depth < 35
        ? "Tend√™ncia clara: leveza e luminosidade perto do rosto."
        : (axes.depth > 70
          ? "Tend√™ncia profunda: peso/intensidade funcionam muito bem."
          : "Tend√™ncia m√©dia: equil√≠brio e versatilidade.");

      $("#chromaLabel").textContent = axes.chroma < 35
        ? "Tend√™ncia suave: fosco/empoeirado/acinzentado."
        : (axes.chroma > 70
          ? "Tend√™ncia brilhante: cores puras e saturadas."
          : "Tend√™ncia m√©dia: vivo sem exagero.");

      // Um contraste simples (para badge)
      const contrast = seasonKey.includes("bright") || seasonKey.includes("deep") ? "Alto" : (seasonKey.includes("soft") ? "Baixo/M√©dio" : "M√©dio");
      $("#badgeContrast").innerHTML = '<i class="fa-solid fa-bolt"></i> Contraste ' + contrast;

      // Paleta
      renderSwatches(data.neutrals || [], "neutralsGrid");
      renderSwatches(data.highlights || [], "highlightsGrid");

      // Looks
      renderLooks(data);

      // Makeup/hair
      $("#makeupLip").textContent = data.makeup?.batom || "‚Äî";
      $("#makeupBlush").textContent = data.makeup?.blush || "‚Äî";
      $("#makeupTip").textContent = makeupTipFor(seasonKey);
      $("#hairTips").textContent = data.hair || "‚Äî";

      // Shopping list
      $("#shoppingList").textContent = buildShoppingList(data, seasonKey, isOlive);

      // Nearby
      renderNearby(seasonKey);
    }

    /* ---------- UI wiring ---------- */
    function initPicker(){
      const picker = $("#seasonPicker");
      picker.innerHTML = PICKER_OPTIONS.map(n => `<option value="${n}">${n}</option>`).join("");

      picker.addEventListener("change", (e) => {
        setSeasonByName(e.target.value);
      });
    }

    function initPhotoInput(){
      const input = $("#photoInput");
      input.addEventListener("change", async (e) => {
        const file = e.target.files?.[0];
        if(!file) return;
        const reader = new FileReader();
        reader.onload = () => {
          const url = String(reader.result || "");
          $("#userPhoto").src = url;
          localStorage.setItem("colorfy_user_photo", url);
          toast("Foto atualizada!");
        };
        reader.readAsDataURL(file);
      });

      // load stored photo
      const saved = localStorage.getItem("colorfy_user_photo");
      if(saved) $("#userPhoto").src = saved;
    }

    function initShare(){
      $("#btnCopyLink").addEventListener("click", async () => {
        try {
          const season = $("#seasonPicker").value || "Outono Profundo";
          setQueryParam("season", season);
          await navigator.clipboard.writeText(window.location.href);
          toast("Link copiado!");
        } catch (e) {
          toast("N√£o foi poss√≠vel copiar (permiss√£o).");
        }
      });
    }

    function initShuffle(){
      $("#btnShuffleFits").addEventListener("click", () => {
        // S√≥ re-renderiza looks (mudando a ordem via shuffle simples)
        const season = $("#seasonPicker").value || "Outono Profundo";
        const key = NAME_TO_KEY[season] || "autumn_deep";
        const data = window.SEASONAL_DATA[key] || window.SEASONAL_DATA["autumn_deep"];

        // Shuffle highlights para variar
        const h = [...(data.highlights || [])];
        for(let i=h.length-1; i>0; i--){
          const j = Math.floor(Math.random()*(i+1));
          [h[i], h[j]] = [h[j], h[i]];
        }
        const mutated = { ...data, highlights: h };
        renderLooks(mutated);
        toast("Looks gerados!");
      });
    }

    function initDownloadSummary(){
      $("#btnDownloadGuide").addEventListener("click", () => {
        const season = $("#seasonPicker").value || "Outono Profundo";
        const key = NAME_TO_KEY[season] || "autumn_deep";
        const data = window.SEASONAL_DATA[key] || window.SEASONAL_DATA["autumn_deep"];
        const isOlive = season.includes("Oliva");

        const lines = [
          `COLORFY ‚Äî Resumo de Paleta`,
          `Esta√ß√£o: ${data.title}${isOlive ? " (Oliva)" : ""}`,
          `Subtons: ${data.subtones}`,
          `Neutros: ${(data.neutrals||[]).map(c=>c.name+" "+c.hex).join(" | ")}`,
          `Destaques: ${(data.highlights||[]).map(c=>c.name+" "+c.hex).join(" | ")}`,
          `Evite: ${data.avoid}`,
          `Maquiagem: Batom: ${data.makeup?.batom || "-"} ‚Ä¢ Blush: ${data.makeup?.blush || "-"}`,
          `Cabelo: ${data.hair}`,
          `Metais: ${metalsFor(key, isOlive)}`,
        ];

        const blob = new Blob([lines.join("\n")], { type: "text/plain;charset=utf-8" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = `colorfy-resumo-${season.toLowerCase().replace(/\s+/g,'-')}.txt`;
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(a.href);
      });
    }

    /* ---------- Boot ---------- */
    (function boot(){
      initPicker();
      initPhotoInput();
      initShare();
      initShuffle();
      initDownloadSummary();

      const fromQuery = getQueryParam("season");
      const initial = (fromQuery && NAME_TO_KEY[fromQuery]) ? fromQuery : "Outono Profundo";

      $("#seasonPicker").value = initial;
      renderResult({ final_palette: { name: initial } });
    })();
  </script>
</body>
</html>
